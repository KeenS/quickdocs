<header>
  <% @if query %>
  <h2>Search Results</h2>
  <div class="search-query">for <strong><% @var query %></strong></span>
  <% @else %>
  <h2>All <%= (format nil "~:D" (length (getf env :releases))) %> Projects</h2>
  <% @endif %>
  <br />
</header>

<% @if query %>
<p class="search-results-summary"><%=
      (format nil "<strong>~:D</strong> project~:P ~:*~[are~;is~:;are~] found." (length (getf env :releases)))
   %></p>
<% @endif %>

<% @if releases %>
<ul class="search-result-container">
<% @loop releases %>
  <li class="search-result">
    <span class="project-name">
      <a href="/<% @var name -escape uri %>/"><% @var name %></a>
    </span>
    <span class="ql-version">
      <% @var ql-version %>
    </span>
    <p class="readme-body"><% @var description -escape xml %></p>
    <% @if download-count %>
    <div class="download-count"><span class="lsf">download</span>&nbsp;<%= (emb::escape-for-xml (format nil "~:D" (getf env :download-count))) %></div>
    <% @endif %>
  </li>
<% @endloop %>
</ul>
<% @endif %>
